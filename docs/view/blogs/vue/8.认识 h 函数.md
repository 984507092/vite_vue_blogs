# h 函数

## 源码

```js
import { createElement } from '../core/vdom/create-element'
import { currentInstance } from './currentInstance'
import { warn } from 'core/util'

/**
 * @internal this function needs manual public type declaration because it relies
 * on previously manually authored types from Vue 2
 */
/**
 * 创建一个虚拟DOM节点。
 *
 * @param type 组件类型或HTML标签名。
 * @param props 组件属性或元素属性。
 * @param children 子元素或子组件。
 * @returns 返回创建的虚拟DOM节点。
 */
export function h(type: any, props?: any, children?: any) {
  // 检查当前是否有一个活跃的组件实例
  if (!currentInstance) {
    // 在开发模式下，如果不在组件的渲染或setup函数中调用h函数，则发出警告
    __DEV__ &&
      warn(
        `globally imported h() can only be invoked when there is an active ` +
        `component instance, e.g. synchronously in a component's render or setup function.` +
        `It's likely that you are calling h() in an async function, ` +
        `which is not currently supported.`
      )
  }
  // 使用当前的组件实例创建一个虚拟DOM节点
  return createElement(currentInstance!, type, props, children, 2, true)
}

```